<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kalp Emoji Piksel SanatÄ± EditÃ¶rÃ¼</title>
    <style>
        /* GENEL VE RESET */
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
            background-color: #f4f7f6;
            color: #333;
            min-height: 100vh;
        }

        h2 {
            color: #007bff;
            margin-bottom: 25px;
            font-weight: 600;
            text-align: center;
            width: 100%;
        }

        /* KONTROL ALANI STÄ°LLERÄ° */
        #controls {
            background-color: #fff;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
            margin-bottom: 25px;
            width: 100%;
            max-width: 800px;
            display: flex;
            flex-wrap: wrap;
            gap: 12px;
            align-items: center;
            justify-content: center;
        }

        #controls label {
            font-weight: 500;
            white-space: nowrap;
        }

        #controls input[type="number"] {
            padding: 8px;
            border: 1px solid #ccc;
            border-radius: 4px;
            text-align: center;
            width: 60px;
        }

        #controls button {
            padding: 10px 15px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.2s;
            white-space: nowrap;
        }

        #controls #updateMatrixButton {
            background-color: #28a745;
            color: white;
        }

        #controls #updateMatrixButton:hover {
            background-color: #218838;
        }

        #controls #copyButton, #controls #importButton {
            background-color: #007bff;
            color: white;
        }

        #controls #copyButton:hover, #controls #importButton:hover {
            background-color: #0056b3;
        }

        #controls #saveButton, #controls #loadButton {
            background-color: #ffc107;
            color: #333;
        }

        #controls #saveButton:hover, #controls #loadButton:hover {
            background-color: #e0a800;
        }

        #controls #clearButton {
            background-color: #dc3545;
            color: white;
        }

        #controls #clearButton:hover {
            background-color: #c82333;
        }

        /* PALET STÄ°LLERÄ° */
        #palette {
            margin-bottom: 25px;
            padding: 15px;
            background-color: #fff;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
            width: 100%;
            max-width: 800px;
            text-align: center;
        }

        #palette strong {
            display: block;
            margin-bottom: 15px;
            color: #555;
        }

        #color-options-container {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            justify-content: center;
            align-items: center;
        }

        .color-option {
            font-size: 24px;
            cursor: pointer;
            padding: 8px;
            border: 3px solid transparent;
            border-radius: 6px;
            transition: transform 0.1s, border-color 0.2s;
            line-height: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            width: 44px;
            height: 44px;
        }

        .color-option:hover {
            transform: scale(1.1);
            background-color: #f0f0f0;
        }

        .selected-color {
            border-color: #007bff;
            background-color: #e9f5ff;
            transform: scale(1.1);
        }

        /* MATRÄ°S STÄ°LLERÄ° */
        #matrix-container {
            overflow-x: auto;
            margin-bottom: 30px;
            width: 100%;
            display: flex;
            justify-content: center;
        }

        #matrix {
            border-collapse: collapse;
            table-layout: fixed;
            background-color: #fff;
            border: 4px solid #333;
            border-radius: 5px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
            margin: 0 auto;
        }

        #matrix td {
            width: 35px;
            height: 35px;
            text-align: center;
            vertical-align: middle;
            font-size: 20px;
            cursor: pointer;
            border: 1px solid #eee;
            transition: background-color 0.1s;
            position: relative;
        }

        #matrix td:hover {
            background-color: #f8f8f8;
        }

        /* SABÄ°T KISIMLAR Ä°Ã‡Ä°N STÄ°L */
        .fixed {
            cursor: not-allowed !important;
            background-color: #d1d1d1 !important;
            color: #aaa;
            border: 1px solid #ddd;
        }

        /* KULLANIM KILAVUZU */
        .manual {
            background-color: #fff;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
            margin-bottom: 20px;
            width: 100%;
            max-width: 800px;
            font-size: 14px;
            color: #555;
        }

        .manual h3 {
            color: #007bff;
            margin-bottom: 15px;
            text-align: center;
        }

        .manual ol {
            margin-left: 20px;
            margin-bottom: 15px;
        }

        .manual li {
            margin-bottom: 8px;
            line-height: 1.5;
        }

        .manual .highlight {
            background-color: #fff3cd;
            padding: 10px;
            border-radius: 4px;
            border-left: 4px solid #ffc107;
            margin: 10px 0;
        }

        /* RESPONSIVE DÃœZENLEMELER */
        @media (max-width: 768px) {
            body {
                padding: 10px;
            }

            #controls {
                padding: 15px;
                gap: 8px;
            }

            #controls button {
                padding: 8px 12px;
                font-size: 14px;
            }

            #matrix td {
                width: 30px;
                height: 30px;
                font-size: 18px;
            }

            .color-option {
                width: 40px;
                height: 40px;
                font-size: 20px;
            }
        }

        @media (max-width: 480px) {
            #controls {
                flex-direction: column;
                align-items: stretch;
            }

            #controls > * {
                width: 100%;
                margin-bottom: 8px;
            }

            #matrix td {
                width: 25px;
                height: 25px;
                font-size: 16px;
            }

            .color-option {
                width: 36px;
                height: 36px;
                font-size: 18px;
            }
        }
    </style>
</head>
<body>

    <h2>Kalp Emoji Sanat EditÃ¶rÃ¼</h2>

    <div class="manual">
        <h3>ğŸ“– YouTube Sohbeti Ä°Ã§in KullanÄ±m KÄ±lavuzu</h3>

        <div class="highlight">
            <strong>ğŸ¯ Ã–NEMLÄ°:</strong> Ä°lk satÄ±r uzunluÄŸunu doÄŸru belirlemek iÃ§in aÅŸaÄŸÄ±daki adÄ±mlarÄ± izleyin:
        </div>

        <ol>
            <li><strong>Ã‡izime baÅŸlamadan Ã¶nce</strong> "Panoya Kopyala" butonuna basÄ±n</li>
            <li>YouTube sohbet kutusuna <strong>100 adet siyah kalp yapÄ±ÅŸtÄ±rÄ±n</strong> (ğŸ–¤)</li>
            <li>Bu mesajÄ± <strong>gÃ¶nderin</strong> ve sohbette gÃ¶rÃ¼nmesini bekleyin</li>
            <li>GÃ¶nderdiÄŸiniz mesajda, <strong>nickname'inizin yanÄ±nda gÃ¶rÃ¼nen kalp sayÄ±sÄ±nÄ± sayÄ±n</strong></li>
            <li>Bu sayÄ±yÄ± "Ä°lk SatÄ±r UzunluÄŸu" olarak ayarlayÄ±n</li>
            <li>ArtÄ±k Ã§iziminizi yapmaya baÅŸlayabilirsiniz!</li>
        </ol>

        <p><strong>ğŸ’¡ Ä°pucu:</strong> Ä°lk satÄ±r uzunluÄŸu, YouTube sohbetinde nickname'inizin yanÄ±nda gÃ¶rÃ¼necek kalp sayÄ±sÄ±nÄ± belirler. DoÄŸru ayarlandÄ±ÄŸÄ±nda Ã§iziminiz nickname'inizin hemen yanÄ±nda baÅŸlayacaktÄ±r.</p>
    </div>

    <div id="controls">
        <label for="firstRowLength">Ä°lk SatÄ±r UzunluÄŸu (0-11):</label>
        <input type="number" id="firstRowLength" value="6" min="0" max="11">
        <button id="updateMatrixButton">Matrisi GÃ¼ncelle</button>
        <button id="copyButton">Panoya Kopyala</button>
        <button id="importButton">Panodan Ä°Ã§e Aktar</button>
        <button id="saveButton">Ã‡izimi Kaydet</button>
        <input type="file" id="fileInput" accept=".txt" style="display: none;">
        <button id="loadButton">Dosya AÃ§</button>
        <button id="clearButton">Temizle</button>
    </div>

    <div id="palette">
        <strong>FÄ±rÃ§a Rengi SeÃ§in:</strong>
        <div id="color-options-container">
            <!-- Renk seÃ§enekleri JavaScript ile eklenecek -->
        </div>
    </div>

    <div id="matrix-container">
        <table id="matrix">
            <!-- Matris JavaScript ile oluÅŸturulacak -->
        </table>
    </div>

    <script>
        // --- TEMEL TANIMLAMALAR ---
        const MATRIX_WIDTH = 11;
        const MATRIX_HEIGHT = 10;
        const TOTAL_EDITABLE_CELLS = 100; // Toplam dÃ¼zenlenebilir hÃ¼cre sayÄ±sÄ±

        // TAM EMOJÄ° PALETÄ°
        const heartPalette = {
            // KALPLER (TÃ¼m renkler)
            'Siyah Kalp': 'ğŸ–¤', 'Beyaz Kalp': 'ğŸ¤', 'KÄ±rmÄ±zÄ± Kalp': 'â¤ï¸',
            'Turuncu Kalp': 'ğŸ§¡', 'SarÄ± Kalp': 'ğŸ’›', 'YeÅŸil Kalp': 'ğŸ’š',
            'Mavi Kalp': 'ğŸ’™', 'Mor Kalp': 'ğŸ’œ', 'Kahverengi Kalp': 'ğŸ¤',
            'Gri Kalp': 'ğŸ©¶', 'AÃ§Ä±k Mavi Kalp': 'ğŸ©µ', 'Pembe Kalp': 'ğŸ©·',
            'Parlak Pembe Kalp': 'ğŸ’–', 'KÄ±rÄ±k Kalp': 'ğŸ’”', 'Atan Kalp': 'ğŸ’—',
            'DÃ¶nen Kalpler': 'ğŸ’', 'Ä°ki Kalp': 'ğŸ’•', 'Kalpli Ok': 'ğŸ’˜',
            'SarÄ± Kalp': 'ğŸ’›', 'Mavi Kalp': 'ğŸ’™',

            // KARELER (TÃ¼m renkler)
            'Siyah Kare': 'â¬›', 'Beyaz Kare': 'â¬œ', 'KÄ±rmÄ±zÄ± Kare': 'ğŸŸ¥',
            'Turuncu Kare': 'ğŸŸ§', 'SarÄ± Kare': 'ğŸŸ¨', 'YeÅŸil Kare': 'ğŸŸ©',
            'Mavi Kare': 'ğŸŸ¦', 'Mor Kare': 'ğŸŸª', 'Kahverengi Kare': 'ğŸŸ«',

            // DAÄ°RELER (TÃ¼m renkler)
            'KÄ±rmÄ±zÄ± Daire': 'ğŸ”´', 'Turuncu Daire': 'ğŸŸ ', 'SarÄ± Daire': 'ğŸŸ¡',
            'YeÅŸil Daire': 'ğŸŸ¢', 'Mavi Daire': 'ğŸ”µ', 'Mor Daire': 'ğŸŸ£',
            'Kahverengi Daire': 'ğŸŸ¤', 'Siyah Daire': 'âš«', 'Beyaz Daire': 'âšª',

            // DÄ°ÄER ÅEKÄ°LLER
            'KÄ±rmÄ±zÄ± ÃœÃ§gen': 'ğŸ”º', 'Mavi Elmas': 'ğŸ”·', 'Turuncu Elmas': 'ğŸ”¶',
            'SarÄ± YÄ±ldÄ±z': 'â­', 'Parlak YÄ±ldÄ±z': 'ğŸŒŸ',

            // SEMBOLLER
            'AteÅŸ': 'ğŸ”¥', 'YÄ±ldÄ±rÄ±m': 'âš¡', 'Kar Tanesi': 'â„ï¸',
            'GÃ¼neÅŸ': 'â˜€ï¸', 'Bulut': 'â˜ï¸', 'YÄ±ldÄ±z': 'â˜…',

            // BOÅLUK
            'BoÅŸluk': 'âŒ'
        };

        const defaultHeart = heartPalette['Siyah Kalp'];
        let selectedHeart = defaultHeart;

        // --- DOM ELEMENTLERÄ° ---
        const firstRowLengthInput = document.getElementById('firstRowLength');
        const updateMatrixButton = document.getElementById('updateMatrixButton');
        const matrixTable = document.getElementById('matrix');
        const colorOptionsContainer = document.getElementById('color-options-container');
        const copyButton = document.getElementById('copyButton');
        const importButton = document.getElementById('importButton');
        const saveButton = document.getElementById('saveButton');
        const loadButton = document.getElementById('loadButton');
        const fileInput = document.getElementById('fileInput');
        const clearButton = document.getElementById('clearButton');

        // --- FONKSÄ°YONLAR ---

        /**
         * Matrisi oluÅŸturur ve varsayÄ±lan siyah kalplerle doldurur.
         */
        function createMatrix() {
            matrixTable.innerHTML = ''; // Temizle
            const firstRowLength = parseInt(firstRowLengthInput.value); // Dinamik uzunluk

            // Son satÄ±rÄ±n dÃ¼zenlenebilir uzunluÄŸunu hesapla (toplam dÃ¼zenlenebilir hÃ¼cre sayÄ±sÄ± sabit)
            const lastRowLength = TOTAL_EDITABLE_CELLS - firstRowLength - (8 * MATRIX_WIDTH);

            // TÃ¼m satÄ±rlarÄ± oluÅŸtur
            for (let rowIndex = 0; rowIndex < MATRIX_HEIGHT; rowIndex++) {
                const row = matrixTable.insertRow();

                for (let colIndex = 0; colIndex < MATRIX_WIDTH; colIndex++) {
                    const cell = row.insertCell();
                    let isFixed = false;

                    // 1. SatÄ±r iÃ§in sabit kÄ±sÄ±mlarÄ± belirle
                    if (rowIndex === 0) {
                        const leadingEmptyCells = MATRIX_WIDTH - firstRowLength;
                        if (colIndex < leadingEmptyCells) {
                            isFixed = true;
                        }
                    }
                    // 10. SatÄ±r iÃ§in sabit kÄ±sÄ±mlarÄ± belirle
                    else if (rowIndex === 9) {
                        const leadingEditableCells = lastRowLength;
                        if (colIndex >= leadingEditableCells) {
                            isFixed = true;
                        }
                    }

                    if (isFixed) {
                        cell.innerHTML = heartPalette['BoÅŸluk'];
                        cell.classList.add('fixed');
                    } else {
                        cell.innerHTML = defaultHeart;
                        cell.addEventListener('click', () => {
                            cell.innerHTML = selectedHeart;
                        });
                    }
                    cell.setAttribute('data-row', rowIndex);
                    cell.setAttribute('data-col', colIndex);
                }
            }
        }

        /**
         * Palet seÃ§eneklerini oluÅŸturur.
         */
        function createPalette() {
            colorOptionsContainer.innerHTML = ''; // Temizle

            // TÃ¼m emoji seÃ§eneklerini ekle
            Object.entries(heartPalette).forEach(([name, emoji]) => {
                const span = document.createElement('span');
                span.className = 'color-option';
                span.innerHTML = emoji;
                span.title = name;
                span.setAttribute('data-color', name);

                // SeÃ§im iÅŸlevi
                span.addEventListener('click', () => {
                    // Ã–nceki seÃ§imi kaldÄ±r
                    document.querySelectorAll('.color-option').forEach(opt => opt.classList.remove('selected-color'));
                    // Yeni seÃ§imi ayarla
                    selectedHeart = emoji;
                    span.classList.add('selected-color');
                });

                colorOptionsContainer.appendChild(span);
            });

            // VarsayÄ±lan siyah kalbi baÅŸlangÄ±Ã§ta seÃ§ili yap
            const defaultOption = colorOptionsContainer.querySelector('[data-color="Siyah Kalp"]');
            if (defaultOption) {
                defaultOption.classList.add('selected-color');
            }
        }

        /**
         * DeÄŸiÅŸtirilebilir hÃ¼cre sayÄ±sÄ±nÄ± hesaplar
         */
        function getEditableCellCount() {
            const firstRowLength = parseInt(firstRowLengthInput.value);
            const lastRowLength = TOTAL_EDITABLE_CELLS - firstRowLength - (8 * MATRIX_WIDTH);

            return firstRowLength + (8 * MATRIX_WIDTH) + lastRowLength;
        }

        /**
         * Ã‡izimi dÃ¼z emoji metni olarak dÃ¶ndÃ¼rÃ¼r (sadece deÄŸiÅŸtirilebilir hÃ¼creler).
         * @param {boolean} formatted - True ise yeni satÄ±rlarla dÃ¶ndÃ¼rÃ¼r.
         * @returns {string} Emoji dizisi.
         */
        function getDrawingText(formatted = false) {
            let result = [];
            const rows = matrixTable.rows;

            for (let i = 0; i < rows.length; i++) {
                let rowText = '';
                const cells = rows[i].cells;

                for (let j = 0; j < cells.length; j++) {
                    // Sadece deÄŸiÅŸtirilebilir hÃ¼creleri dahil et
                    if (!cells[j].classList.contains('fixed')) {
                        rowText += cells[j].innerHTML;
                    }
                }

                if (rowText) { // BoÅŸ satÄ±rlarÄ± ekleme
                    result.push(rowText);
                }
            }

            return formatted ? result.join('\n') : result.join('');
        }

        /**
         * Ã‡izimi matrise uygular (sadece deÄŸiÅŸtirilebilir hÃ¼crelere).
         * @param {string} text - DÃ¼z emoji metni.
         */
        function applyDrawingText(text) {
            // Toplam deÄŸiÅŸtirilebilir hÃ¼cre sayÄ±sÄ±nÄ± hesapla
            const requiredLength = getEditableCellCount();

            // TÃ¼m boÅŸluk ve yeni satÄ±r karakterlerini kaldÄ±rÄ±p sadece emojileri bÄ±rak
            const cleanText = text.replace(/[\s\n\r]/g, '');

            if (cleanText.length !== requiredLength) {
                alert(`Hata: Ä°Ã§e aktarÄ±lan metin ${requiredLength} karakter uzunluÄŸunda olmalÄ±. Gelen uzunluk: ${cleanText.length}.`);
                return;
            }

            let charIndex = 0;
            const rows = matrixTable.rows;

            for (let i = 0; i < rows.length; i++) {
                const cells = rows[i].cells;

                for (let j = 0; j < cells.length; j++) {
                    const cell = cells[j];

                    // Sadece sabit olmayan hÃ¼crelere deÄŸiÅŸiklik yapma izni ver
                    if (!cell.classList.contains('fixed')) {
                         cell.innerHTML = cleanText[charIndex];
                         charIndex++;
                    }
                }
            }
        }

        // --- OLAY DÄ°NLEYÄ°CÄ°LERÄ° (Buton Ä°ÅŸlevleri) ---

        // Matrisi GÃ¼ncelle butonu
        updateMatrixButton.addEventListener('click', () => {
            if (confirm("Ä°lk satÄ±r uzunluÄŸunu deÄŸiÅŸtirmek mevcut Ã§izimi temizleyecektir. Devam etmek istiyor musunuz?")) {
                createMatrix();
            }
        });

        // Panoya Kopyala
        copyButton.addEventListener('click', async () => {
            const drawingText = getDrawingText(false);
            try {
                await navigator.clipboard.writeText(drawingText);
                alert('Ã‡izim panoya baÅŸarÄ±yla kopyalandÄ±! (DeÄŸiÅŸtirilebilir pikseller dahil edildi)\n\nYouTube sohbetine yapÄ±ÅŸtÄ±rarak nickname uzunluÄŸunuzu test edebilirsiniz.');
            } catch (err) {
                console.error('Kopyalama baÅŸarÄ±sÄ±z:', err);
                alert('Kopyalama baÅŸarÄ±sÄ±z oldu. LÃ¼tfen konsolu kontrol edin.');
            }
        });

        // Panodan Ä°Ã§e Aktar
        importButton.addEventListener('click', async () => {
            try {
                const text = await navigator.clipboard.readText();
                applyDrawingText(text);
                alert('Ã‡izim panodan baÅŸarÄ±yla iÃ§e aktarÄ±ldÄ±! (Sadece deÄŸiÅŸtirilebilir pikseller gÃ¼ncellendi)');
            } catch (err) {
                console.error('Ä°Ã§e aktarma baÅŸarÄ±sÄ±z:', err);
                alert('Ä°Ã§e aktarma baÅŸarÄ±sÄ±z oldu. Panonuzda geÃ§erli bir Ã§izim metni olduÄŸundan emin olun.');
            }
        });

        // Kaydet
        saveButton.addEventListener('click', () => {
            const drawingText = getDrawingText(true);
            const blob = new Blob([drawingText], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'kalp_emoji_cizimi.txt';
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            alert('Ã‡izim "kalp_emoji_cizimi.txt" olarak kaydedildi! (Sadece deÄŸiÅŸtirilebilir pikseller)');
        });

        // Dosya AÃ§
        loadButton.addEventListener('click', () => {
            fileInput.click();
        });

        fileInput.addEventListener('change', (event) => {
            const file = event.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = (e) => {
                    const text = e.target.result;
                    applyDrawingText(text);
                    alert('Ã‡izim dosyadan baÅŸarÄ±yla yÃ¼klendi! (Sadece deÄŸiÅŸtirilebilir pikseller gÃ¼ncellendi)');
                };
                reader.readAsText(file);
            }
        });

        // Temizle
        clearButton.addEventListener('click', () => {
            if (confirm("Mevcut Ã§izimi temizlemek istediÄŸinizden emin misiniz?")) {
                createMatrix();
            }
        });

        // --- BAÅLANGIÃ‡ ---
        document.addEventListener('DOMContentLoaded', () => {
            createMatrix();
            createPalette();
        });
    </script>
</body>
</html>
