# Mod_Rewrite motorunu aç
RewriteEngine On

# Base dizinini ayarla
RewriteBase /

# -----------------------------------------------------------------
# 1. VAROLAN DOSYALARI VE KLASÖRLERİ ATLA
# -----------------------------------------------------------------
RewriteCond %{REQUEST_FILENAME} -f [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^ - [L]

# -----------------------------------------------------------------
# 2. API VE ÖZEL DOSYALARI KORU
# -----------------------------------------------------------------
RewriteRule ^(admin|includes|config|vendor)/ - [L]

# -----------------------------------------------------------------
# 3. ÖZEL ROTALARIN YÖNLENDİRİLMESİ
# -----------------------------------------------------------------

# a) Admin Paneli Yönlendirmesi
RewriteRule ^admin/dashboard/?$ admin/dashboard.php [L]

# b) Çizim Sayfası
RewriteRule ^drawing/([0-9]+)/?$ drawing.php?id=$1 [L,QSA]

# c) API endpoint'leri
RewriteRule ^api/(.*)$ api/$1 [L]

# -----------------------------------------------------------------
# 4. PROFİL SAYFASI YÖNLENDİRMESİ
# -----------------------------------------------------------------
# Sadece kullanıcı adı benzeri pattern'leri yakala
# Rakam, harf, tire ve alt çizgi içeren 3-20 karakterli kullanıcı adları
RewriteRule ^([a-zA-Z0-9_-]{3,20})/?$ profile.php?username=$1 [L,QSA]

# -----------------------------------------------------------------
# 5. DİĞER TÜM İSTEKLERİ INDEX'E YÖNLENDİR
# -----------------------------------------------------------------
RewriteRule ^(.*)$ index.php [L,QSA]
